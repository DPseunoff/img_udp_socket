# image_udp_socket

Проект для лабораторных работ по математическим моделям безопасности информационных систем.
МАИ 2024

Авторы:

- Псеунов Д.Р. (работа с UDP/JPEG кодирование/шифрование/контрольная сумма),
- Жарова А.А. (работа с UI/утилиты вывода пикселей изображения/навигация в приложении)

## Описание

Реализовано приложение на Android с применением кросс-платформенного фреймоворка Flutter. Работа
происходит следующим образом:

1. Пользователи выбирают свою роль - отправитель или получатель
2. Отправитель должен ввести IP и порт получателя, выведенного ему на экран. После можно начинать
   рукопожатие
3. После рукопожатия отправитель может сгенерировать изображение случайных пикселей и отправить его.
   Пользователь получает изображение и оно выводится ему на экран.

## Структура проекта

### Data

В директории находится код data слоя приложения. В нем лежат репозитории отправителя и получателя, в
которых производится общение между двумя приложения.
Особенности:

- UDP соединение производится с помощью встроенных в фреймворк сокетов
- после выбора роли соответствующие репозитории инициализируются. получателю выводится его IP и
  генерируется случайный порт
- во время хендшейка получатель отправляет отправителю свой публичный RSA ключ, далее отправитель
  шифрует свой секретный ключ алгоритмом RSA и отправляет его обратно. таким образом оба
  пользователя в конечном итоге имеют один секретный ключ для симметричного алгоритма шифрования XOR
- перед отправкой матрица пикселей кодируется в формат JPEG с помощью встроенной библиотеки Image.
  При получении декодирование происходит аналогично за счет встроенных средств.
- во время отправки данные изображения делятся на пакеты с максимальной конечной длинной 256 байтов.
  для каждого куска изображения подсчитывается контрольная сумма алгоритмом CRC32 и вместе данные
  шифруются через XOR.
- во время получения данный расшифровываются и сверяется контрольная сумма из пакета и подсчитанная.
  при несоответствии происходит ошибка получения. пакеты в итоге собираются в один массив байтов и
  декодируются из JPEG в матрицу пикселей и передаются в Domain слой

### Domain

В директории прописана основная бизнес логика приложения, основанная на библиотеке Flutter bloc.
После каждого обращения к репозиторию бизнес логика меняет свое состояния, на что реагирует UI.

### UI

Данный слой отвечает за отображение данных и состояний, полученных из слоя бизнес логики. На экранах
есть специальный виджет, позволяющий выводить изображения попиксельно через Canvas. UI также
позволяет вводить IP и порт в специальные текстовые поля, что нужно для отправителя перед началом
работы.

### Shared

В директории сконцентрированы утилиты, не относящиеся напрямую к какому-либо слою.

- CRCUtils - утилита подсчета контрольной суммы через алгоритм CRC32
- RSAUtils - утилита шифрования данных через алгоритм RSA и генерации публичного и приватного ключей
- ImageUtils - утилита генерации произвольного изображения (матрицы пикселей), а также разбора
  класса изображения обратно в пиксели
- Logger - логгер событий, происходящих при дебаге программы
- XORHelper - утилита шифрования данных через алгоритм XOR
